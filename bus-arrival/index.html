<!DOCTYPE html>
<title>Bus arrival times</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="google" value="notranslate">
<style>
body{font-family:Roboto,sans-serif;font-size:14px;padding:0;margin:0;background-color:#F7F7F7}main{max-width:480px;margin:0 auto;box-shadow:0 0 1px rgba(0,0,0,.3);background-color:#fff;min-height:100vh}header{position:relative;background-color:#E8E4DB;background-size:cover;background-position:center;box-shadow:inset 0 0 10px rgba(0,0,0,.2);max-width:480px;height:240px}header h1{color:#000;font-weight:400;font-size:1em;padding:80px 10px 0;margin:0;position:absolute;width:100%;bottom:0;box-sizing:border-box;background-image:linear-gradient(to bottom,rgba(255,255,255,0),rgba(255,255,255,1));text-shadow:1px 1px #fff,-1px 1px #fff}header:before{content:'';position:absolute;top:50%;left:50%;width:18px;height:19px;margin:-9.5px 0 0 -9px;background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAmCAMAAACbFsmhAAABfVBMVEUAAAAAAAAAAAAWFhb///////////8yMjIAAAAAAAAAAAAAAAAAAACDg4P///8AAADIyMirq6vz8/MAAAD///8AAAD09PQAAADu7u7////8/Pza2trq6urOzs7f39////8AAADx8fHd3d0AAADR0dGVlZXx8fEAAADx8fH///+YmJjZ2dkAAABOTk4HBwfe3t719fX///8AAADc3Nzc3NwAAAAGBgYAAABeXl4AAAAAAAAAAAD////////g4ODz8/OxsbH///+zs7PJycliYmLh4eH39/fz8/MAAAAAAADz8/P////h4eH///////+AgID////19fUAAADz8/Pg4OD/////+Pn9/f394ef+9Pb1Y4L2dZDwG0j3hZ393eT3hp7wHUnzS2/wH0vq6ur94ObxJ1HxJE/zTXD1YoH6sMD1Z4XxL1j1ZIP6scH2co72dI/93OPzRGnxKVPxJlHxLVb+8/b6r7/zQmj1Y4H819/xMFn4lar2d5LwIEzzSW28/g+uAAAAVXRSTlMAWTZeFAIIZgcDRwEYhppLx57YHlQdzkr5H6jn4c7zV0Ti7TrMkORR4WeS5wxvRu/NQyXt7EhaWFEkFwqcRfbWkD+RxVP4rdcjC9Qg9x5mhWSuTNP3JRxyxQAAAfNJREFUeF6NlFWX4zAMhZV2pkyDzMwMy8xMN1zuMDPu/vad2mnWhW3me9LRuYqda0kk0jbWXt+qKK317WNtVJHanlkIzPbUUhlzfYC2a6xfpVJX68auBvTNUTGeCKDur5k2a4YKRDwkUPMUcjJjFvE7KeNnjaAZhXpolnGoYtRWed7i8sSswMklPhROfARV1IgqFRFiPIZ8biUzW2eJ09PE2VbhfucynjN/hhG3Uhs5WOQ2rFQSw3m/GqHyutQ1BK5T/NsqGomoGQYvYhpBxbM3aCb6CI17eIESLrirGj7TF2wWvluCdYtNfKPv2GPxDhgH+uqqfgDGDhPt4Q114o9VkCdxlI+PEkzEj0ijk7LYZjHP6yZD5xUs3kaWFPB/1Vj+mIuOmUjjzkC5k+hux/U7X7yfBp0tGKQXzmY+o1fOz3KP7ndUf2ADHe/o/ZBTqww9JJr+ZDed/q/pdLvpnkwTUVO4evt+bSKi4I9YtUGIRYN0S8i98P+RWnA/IIbL241c5eHs9rqI4w94FyHHS8Y8E5ex6A34ycLX4o6VLox9FXjpbvGRjS8ghV+z1ZPOr540Wz2/wlLARwJ+l7Q8PgGBifFlyeWnYkJRSZqq65rJKkp2pqtuSpKiISoj2NArCfQ2BKkik/MDSyMrKyNLA/OTJPAXWVpwYGYx1TgAAAAASUVORK5CYII=) no-repeat;background-size:18px 19px}header h1 b{display:block;font-weight:500;font-size:20px}table{border:10px solid #fff;width:100%;table-layout:fixed;border-spacing:0;box-sizing:border-box}table th,table td{padding:.5em 1em .5em 0;text-align:left}thead th{font-weight:300}tbody th{font-weight:500}tfoot td{opacity:.7;padding:2em 0 1em}.insignificant{opacity:.3}.loading{text-align:center;padding:2em 0}.fading{-webkit-animation:fading 1s linear infinite;animation:fading 1s linear infinite}@-webkit-keyframes fading{from{opacity:.3}50%{opacity:.7}to{opacity:.3}}@keyframes fading{from{opacity:.3}50%{opacity:.7}to{opacity:.3}}#outdated-browser{background-color:#ff9;padding:10px;text-align:center}
</style>
<script async src="https://d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js" data-apikey="37e227db7c88af3576c11f86cba0cc02"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-23235796-4', 'auto');
ga('send', 'pageview');
</script>
<!--[if lt IE 10]>
	<div id="outdated-browser">
		<p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	</div>
<![endif]-->
<main>
	<header id="bus-stop-heading">
		<h1>Bus arrival times for <b id="bus-stop-name">&nbsp;</b></h1>
	</header>
	<table>
		<thead>
			<th>Bus number</th>
			<th>Next</th>
			<th>Subsequent</th>
		</thead>
		<tbody id="arrivals" class="fading">
			<tr>
				<td colspan="3" class="loading">
					Loading&hellip;
				</td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<td colspan="3">Note: Arrival times update automatically every 15 seconds.</td>
			</tr>
		</tfoot>
	</table>
</main>
<script>
!function(n,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():n.lscache=e()}(this,function(){function n(){var n="__lscachetest__",t=n;if(void 0!==h)return h;try{u(n,t),a(n),h=!0}catch(r){h=e(r)?!0:!1}return h}function e(n){return n&&"QUOTA_EXCEEDED_ERR"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name||"QuotaExceededError"===n.name?!0:!1}function t(){return void 0===p&&(p=null!=window.JSON),p}function r(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function o(n){return n+m}function i(){return Math.floor((new Date).getTime()/w)}function c(n){return localStorage.getItem(g+E+n)}function u(n,e){localStorage.removeItem(g+E+n),localStorage.setItem(g+E+n,e)}function a(n){localStorage.removeItem(g+E+n)}function f(n){for(var e=new RegExp("^"+g+r(E)+"(.*)"),t=localStorage.length-1;t>=0;--t){var i=localStorage.key(t);i=i&&i.match(e),i=i&&i[1],i&&i.indexOf(m)<0&&n(i,o(i))}}function l(n){var e=o(n);a(n),a(e)}function s(n){var e=o(n),t=c(e);if(t){var r=parseInt(t,v);if(i()>=r)return a(n),a(e),!0}}function d(n,e){S&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+n),e&&window.console.warn("lscache - The error was: "+e.message))}var h,p,g="lscache-",m="-cacheexpiration",v=10,w=6e4,y=Math.floor(864e13/w),E="",S=!1,x={set:function(r,s,h){if(n()){if("string"!=typeof s){if(!t())return;try{s=JSON.stringify(s)}catch(p){return}}try{u(r,s)}catch(p){if(!e(p))return d("Could not add item with key '"+r+"'",p),void 0;var g,m=[];f(function(n,e){var t=c(e);t=t?parseInt(t,v):y,m.push({key:n,size:(c(n)||"").length,expiration:t})}),m.sort(function(n,e){return e.expiration-n.expiration});for(var w=(s||"").length;m.length&&w>0;)g=m.pop(),d("Cache is full, removing item with key '"+r+"'"),l(g.key),w-=g.size;try{u(r,s)}catch(p){return d("Could not add item with key '"+r+"', perhaps it's too big?",p),void 0}}h?u(o(r),(i()+h).toString(v)):a(o(r))}},get:function(e){if(!n())return null;if(s(e))return null;var r=c(e);if(!r||!t())return r;try{return JSON.parse(r)}catch(o){return r}},remove:function(e){n()&&l(e)},supported:function(){return n()},flush:function(){n()&&f(function(n){l(n)})},flushExpired:function(){n()&&f(function(n){s(n)})},setBucket:function(n){E=n},resetBucket:function(){E=""},enableWarnings:function(n){S=n}};return x});
</script>
<script>
var $arrivals=document.getElementById("arrivals"),arrivalsTimeout,xhr=new XMLHttpRequest,showArrivals=function(e){return document.hidden||"hidden"==document.visibilityState?(arrivalsTimeout=setTimeout(function(){showArrivals(e)},2500),void 0):(xhr.open("get","https://arrivelah.herokuapp.com/?id="+e,!0),xhr.onload=function(){$arrivals.classList.remove("fading");var t=JSON.parse(this.responseText);t&&!t.error&&($arrivals.innerHTML=t.services.sort(function(e,t){return null==e.next.duration_ms?1:null==t.next.duration_ms?-1:e.next.duration_ms-t.next.duration_ms}).map(function(e){return"<tr><th>"+e.no+"</th><td>"+timeDisplay(e.next.duration_ms)+"</td><td>"+timeDisplay(e.subsequent.duration_ms)+"</td></tr>"}).join(""),arrivalsTimeout=setTimeout(function(){showArrivals(e)},15e3))},xhr.onerror=function(){arrivalsTimeout=setTimeout(function(){showArrivals(e)},5e3)},xhr.send(),$arrivals.classList.add("fading"),void 0)},timeDisplay=function(e){if(null==e)return'<span class="insignificant">Unavailable</span>';var t=Math.ceil(e/1e3/60);return 0>=t?"Now":1==t?t+" min":t+" mins"},dataEndPoints={busStops:"bus-stops.json",busServices:"bus-services.json",busService:"bus-services/{{no}}.json",busStopsServices:"bus-stops-services.json"},getData=function(e,t,s){2==arguments.length&&(s=t,t={});var n=lscache.get(e);if(n)s(null,n);else{var a=new XMLHttpRequest,r="../data/2/"+dataEndPoints[e.split("-")[0]];for(p in t)r=r.replace("{{"+p+"}}",t[p]);a.onload=function(){try{var t=JSON.parse(this.responseText);s(null,t),lscache.set(e,t,1440)}catch(n){s(n)}},a.onerror=a.onabort=s,a.open("get",r,!0),a.send()}};getData("busStops",function(e,t){var s=t.reduce(function(e,t){return e[t.no]=t,e},{});window.onhashchange=function(){var e=location.hash.slice(1),t=s[e];if(clearTimeout(arrivalsTimeout),e&&t){var n=t.lat+","+t.lng,a=e+" - "+t.name;document.title="Bus arrival times for "+a,document.getElementById("bus-stop-name").innerHTML=a,document.getElementById("bus-stop-heading").style.backgroundImage="url(https://maps.googleapis.com/maps/api/staticmap?"+["key=AIzaSyDJii3LssFIl3cw4XzTxtWqSls57rayV5I","center="+n,"zoom=16","scale=2","size=480x240","maptype=roadmap","format=png"].join("&")+")",showArrivals(e)}else alert("Invalid bus stop code.")},window.onhashchange()});
</script>
<script>
WebFontConfig = {
	google: { families: [ 'Roboto:300,400,500,700' ] }
};
(function(){
	var wf = document.createElement('script');
	wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
		'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
	wf.type = 'text/javascript';
	wf.async = 'true';
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(wf, s);
})();
</script>
